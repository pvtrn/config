# ============================================
# Основные настройки
# ============================================

# Включить поддержку мыши
set -g mouse on

# True color support (24-bit)
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"
set -as terminal-features ",tmux-256color:RGB"
set-environment -g COLORTERM truecolor

# OSC52 clipboard support (для копирования через SSH в iTerm2)
set -g allow-passthrough all
set -g set-clipboard on
set -as terminal-features ',xterm*:clipboard'
set -as terminal-features ',screen*:clipboard'
set -as terminal-features ',ghostty:clipboard'

# Kitty graphics protocol support (для image.nvim)
set -g visual-activity off

# Vi-style copy mode
setw -g mode-keys vi

# Copy mode bindings (vim-style)
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel '~/.local/bin/tmux-osc52-copy'
bind -T copy-mode-vi Enter send -X copy-pipe-and-cancel '~/.local/bin/tmux-osc52-copy'

# Mouse selection copies to clipboard automatically (stay in copy-mode, keep scroll position)
# After copying, press q or Escape to exit copy-mode (scroll will return to bottom)
bind -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe '~/.local/bin/tmux-osc52-copy'

# Quick exit from copy-mode
bind -T copy-mode-vi Escape send -X cancel

# Начинать нумерацию окон с 1
set -g base-index 1
setw -g pane-base-index 1

# Перенумеровывать окна при закрытии
set -g renumber-windows on

# Увеличить историю
set -g history-limit 50000

# Быстрая реакция на escape
set -sg escape-time 0

# ============================================
# Prefix key - меняем на Ctrl+a (удобнее чем Ctrl+b)
# ============================================
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# ============================================
# Дублирование хоткеев для русской раскладки
# ============================================

# c/с - новое окно
bind с new-window

# n/т - следующее окно
bind т next-window

# p/з - предыдущее окно
bind з previous-window

# l/д - последнее окно
bind д last-window

# w/ц - список окон
bind ц choose-window

# d/в - отключиться от сессии
bind в detach-client

# x/ч - закрыть панель
bind ч confirm-before -p "kill-pane #P? (y/n)" kill-pane

# z/я - zoom панели
bind я resize-pane -Z

# [/х - режим копирования
bind х copy-mode

# ]/ъ - вставить
bind ъ paste-buffer

# :/Ж - командная строка
bind Ж command-prompt

# ,/б - переименовать окно
bind б command-prompt -I "#W" "rename-window '%%'"

# ./ю - переместить окно
bind ю command-prompt "move-window -t '%%'"

# o/щ - следующая панель
bind щ select-pane -t :.+

# ;/ж - последняя панель
bind ж last-pane

# q/й - номера панелей
bind й display-panes

# &/? - закрыть окно (на той же клавише с shift)
bind ? confirm-before -p "kill-window #W? (y/n)" kill-window

# s/ы - список сессий
bind ы choose-tree -s

# $/; - переименовать сессию
bind \; command-prompt -I "#S" "rename-session '%%'"

# ============================================
# Сплиты (splits)
# ============================================

# Удобные биндинги (работают в любой раскладке)
bind | split-window -h -c "#{pane_current_path}"
bind \\ split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind _ split-window -v -c "#{pane_current_path}"

# ============================================
# Перемещение и управление панелями
# ============================================

# Поменять панели местами (Shift+стрелки - работает в любой раскладке)
bind -r S-Left swap-pane -U
bind -r S-Right swap-pane -D
bind -r S-Up swap-pane -U
bind -r S-Down swap-pane -D

# {/} и русские х/ъ - swap panes
bind -r \{ swap-pane -U
bind -r \} swap-pane -D

# Rotate panes
bind -r C-o rotate-window

# !/1 - вынести панель в отдельное окно
bind ! break-pane

# ============================================
# Vim-style навигация (hjkl + русские роьд)
# ============================================

bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

bind р select-pane -L
bind о select-pane -D
bind л select-pane -U
bind д select-pane -R

# Ресайз с Shift+hjkl (HJKL + РОЛЬД)
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

bind -r Р resize-pane -L 5
bind -r О resize-pane -D 5
bind -r Л resize-pane -U 5
bind -r Д resize-pane -R 5

# Навигация через Alt+стрелки (работает в любой раскладке)
# bind -n M-Left select-pane -L
# bind -n M-Right select-pane -R
# bind -n M-Up select-pane -U
# bind -n M-Down select-pane -D

# Переключение между окнами через Super+стрелки
# bind -n '\e[1;9D' previous-window
# bind -n '\e[1;9C' next-window
bind -n M-Left previous-window
bind -n M-Right next-window
bind -n M-Up switch-client -p
bind -n M-Down switch-client -n

# Перемещение окон (табов) влево/вправо
bind -n C-S-Left swap-window -t -1\; select-window -t -1
bind -n C-S-Right swap-window -t +1\; select-window -t +1

# То же самое с префиксом: prefix + [ / ]  (для совместимости)
bind -r [ swap-window -t -1\; select-window -t -1
bind -r ] swap-window -t +1\; select-window -t +1

# Изменение размера через Ctrl+стрелки
bind -n C-Left resize-pane -L 3
bind -n C-Right resize-pane -R 3
bind -n C-Up resize-pane -U 3
bind -n C-Down resize-pane -D 3

# ============================================
# Сессии
# ============================================

# (/) - предыдущая/следующая сессия
bind ( switch-client -p
bind ) switch-client -n

# N/Т - новая сессия с запросом имени
bind N command-prompt -p "New session name:" "new-session -s '%%'"
bind Т command-prompt -p "New session name:" "new-session -s '%%'"

# L - последняя сессия
bind L switch-client -l

# ============================================
# Дополнительные полезные команды
# ============================================

# f/а - найти окно
bind f command-prompt "find-window -Z '%%'"
bind а command-prompt "find-window -Z '%%'"

# i/ш - информация об окне
bind i display-message
bind ш display-message

# t/е - показать время
bind t clock-mode
bind е clock-mode

# Space - переключить layout
bind Space next-layout

# = - выровнять панели (tiled)
bind = select-layout tiled

# m/ь - отметить панель
bind m select-pane -m
bind ь select-pane -m

# P/З - toggle подписей панелей
bind P if -F "#{==:#{pane-border-status},off}" \
    "set pane-border-status top; set pane-border-format ' #{?pane_title,#{pane_title},#{pane_current_command}} '" \
    "set pane-border-status off"
bind З if -F "#{==:#{pane-border-status},off}" \
    "set pane-border-status top; set pane-border-format ' #{?pane_title,#{pane_title},#{pane_current_command}} '" \
    "set pane-border-status off"

# < / Б - переименовать панель
bind < command-prompt -p "Pane title:" "select-pane -T '%%'"
bind Б command-prompt -p "Pane title:" "select-pane -T '%%'"

# M/Ь - присоединить отмеченную панель сюда
bind M join-pane
bind Ь join-pane

# r/к - перезагрузить конфиг
bind r source-file ~/.tmux.conf \; display "Config reloaded!"
bind к source-file ~/.tmux.conf \; display "Конфиг перезагружен!"

# ============================================
# Tmux Themepack - Powerline Cyan Block
# ============================================

# Themepack format options
# set -goq @themepack-status-left-area-left-format "#S"
# set -goq @themepack-status-left-area-middle-format "#(whoami)"
# set -goq @themepack-status-left-area-right-format "#I:#P"
set -goq @themepack-status-right-area-left-format "%H:%M:%S"
set -goq @themepack-status-right-area-middle-format "%d-%b-%y"
set -goq @themepack-status-right-area-right-format "#H"
set -goq @themepack-window-status-current-format "#I:#W#F"
set -goq @themepack-window-status-format "#I:#W#F"

# Customizable prefixes and suffixes for @themepack-* format options
set -goq @themepack-status-left-area-left-prefix ""
set -goq @themepack-status-left-area-left-suffix ""
set -goq @themepack-status-left-area-middle-prefix ""
set -goq @themepack-status-left-area-middle-suffix ""
set -goq @themepack-status-left-area-right-prefix ""
set -goq @themepack-status-left-area-right-suffix ""
set -goq @themepack-status-right-area-left-prefix ""
set -goq @themepack-status-right-area-left-suffix ""
set -goq @themepack-status-right-area-middle-prefix ""
set -goq @themepack-status-right-area-middle-suffix ""
set -goq @themepack-status-right-area-right-prefix ""
set -goq @themepack-status-right-area-right-suffix ""
set -goq @themepack-window-status-current-prefix ""
set -goq @themepack-window-status-current-suffix ""
set -goq @themepack-window-status-prefix ""
set -goq @themepack-window-status-suffix ""

# Apply prefixes and suffixes to @themepack-* format options
set -gqF @themepack-status-left-area-left-format "#{@themepack-status-left-area-left-prefix}#{@themepack-status-left-area-left-format}#{@themepack-status-left-area-left-suffix}"
set -gqF @themepack-status-left-area-middle-format "#{@themepack-status-left-area-middle-prefix}#{@themepack-status-left-area-middle-format}#{@themepack-status-left-area-middle-suffix}"
set -gqF @themepack-status-left-area-right-format "#{@themepack-status-left-area-right-prefix}#{@themepack-status-left-area-right-format}#{@themepack-status-left-area-right-suffix}"
set -gqF @themepack-status-right-area-left-format "#{@themepack-status-right-area-left-prefix}#{@themepack-status-right-area-left-format}#{@themepack-status-right-area-left-suffix}"
set -gqF @themepack-status-right-area-middle-format "#{@themepack-status-right-area-middle-prefix}#{@themepack-status-right-area-middle-format}#{@themepack-status-right-area-middle-suffix}"
set -gqF @themepack-status-right-area-right-format "#{@themepack-status-right-area-right-prefix}#{@themepack-status-right-area-right-format}#{@themepack-status-right-area-right-suffix}"
set -gqF @themepack-window-status-current-format "#{@themepack-window-status-current-prefix}#{@themepack-window-status-current-format}#{@themepack-window-status-current-suffix}"
set -gqF @themepack-window-status-format "#{@themepack-window-status-prefix}#{@themepack-window-status-format}#{@themepack-window-status-suffix}"

# Powerline color options
set -goq @powerline-color-main-1 colour39
set -goq @powerline-color-main-2 colour81
set -goq @powerline-color-main-3 colour75
set -goq @powerline-color-black-1 black
set -goq @powerline-color-grey-1 colour233
set -goq @powerline-color-grey-2 colour235
set -goq @powerline-color-grey-3 colour238
set -goq @powerline-color-grey-4 colour240
set -goq @powerline-color-grey-5 colour243
set -goq @powerline-color-grey-6 colour245

# Powerline Block Override
set -goqF @powerline-color-activity-1 "#{@powerline-color-main-3}"

# Powerline options
set -goqF @powerline-color-activity-1 "#{@powerline-color-grey-6}"
set -goqF @powerline-status-bg "#{@powerline-color-grey-1}"
set -goqF @powerline-status-fg "#{@powerline-color-grey-4}"
set -goqF @powerline-status-left-area-left-bg "#{@powerline-color-main-1}"
set -goqF @powerline-status-left-area-left-fg "#{@powerline-status-bg}"
set -goqF @powerline-status-left-area-middle-bg "#{@powerline-status-fg}"
set -goqF @powerline-status-left-area-middle-fg "#{@powerline-status-bg}"
set -goqF @powerline-status-left-area-right-bg "#{@powerline-color-grey-2}"
set -goqF @powerline-status-left-area-right-fg "#{@powerline-status-fg}"
set -goqF @powerline-status-left-bg "#{@powerline-color-grey-1}"
set -goqF @powerline-status-left-fg "#{@powerline-color-grey-5}"
set -goqF @powerline-status-right-area-left-bg "#{@powerline-color-grey-2}"
set -goqF @powerline-status-right-area-left-fg "#{@powerline-status-fg}"
set -goqF @powerline-status-right-area-middle-bg "#{@powerline-status-fg}"
set -goqF @powerline-status-right-area-middle-fg "#{@powerline-status-bg}"
set -goqF @powerline-status-right-area-right-bg "#{@powerline-color-grey-6}"
set -goqF @powerline-status-right-area-right-fg "#{@powerline-status-bg}"
set -goqF @powerline-status-right-bg "#{@powerline-color-grey-1}"
set -goqF @powerline-status-right-fg "#{@powerline-color-grey-5}"

# Theme options
set -goqF @theme-clock-mode-colour "#{@powerline-color-main-1}"
set -goq  @theme-clock-mode-style 24
set -goqF @theme-display-panes-active-colour "#{@powerline-color-grey-6}"
set -goqF @theme-display-panes-colour "#{@powerline-color-grey-1}"
set -goqF @theme-message-bg "#{@powerline-color-main-1}"
set -goqF @theme-message-command-bg "#{@powerline-color-main-1}"
set -goqF @theme-message-command-fg "#{@powerline-color-black-1}"
set -goqF @theme-message-fg "#{@powerline-color-black-1}"
set -goqF @theme-mode-bg "#{@powerline-color-main-1}"
set -goqF @theme-mode-fg "#{@powerline-color-black-1}"
set -goq  @theme-pane-active-border-bg default
set -goqF @theme-pane-active-border-fg "#{@powerline-color-grey-3}"
set -goq  @theme-pane-border-bg default
set -goqF @theme-pane-border-fg "#{@powerline-color-grey-3}"
set -goqF @theme-status-bg "#{@powerline-status-bg}"
set -goqF @theme-status-fg "#{@powerline-status-fg}"
set -goq  @theme-status-interval 1
set -goq  @theme-status-justify left
set -goqF @theme-status-left ""
set -goqF @theme-status-left-bg "#{@powerline-status-left-bg}"
set -goqF @theme-status-left-fg "#{@powerline-status-left-fg}"
set -goq  @theme-status-left-length 0
set -goqF @theme-status-right "#[fg=#{@powerline-status-right-area-left-bg},bg=#{@theme-status-bg}]#[fg=#{@powerline-status-right-area-left-fg},bg=#{@powerline-status-right-area-left-bg}] #{@themepack-status-right-area-left-format} #[fg=#{@powerline-status-right-area-middle-bg},bg=#{@powerline-status-right-area-left-bg}]#[fg=#{@powerline-status-right-area-middle-fg},bg=#{@powerline-status-right-area-middle-bg}] #{@themepack-status-right-area-middle-format} #[fg=#{@powerline-status-right-area-right-bg},bg=#{@powerline-status-right-area-middle-bg}]#[fg=#{@powerline-status-right-area-right-fg},bg=#{@powerline-status-right-area-right-bg},bold] #{@themepack-status-right-area-right-format} "
set -goqF @theme-status-right-bg "#{@powerline-status-right-bg}"
set -goqF @theme-status-right-fg "#{@powerline-status-right-fg}"
set -goq  @theme-status-right-length 150
set -goqF @theme-window-status-activity-bg "#{@theme-status-bg}"
set -goqF @theme-window-status-activity-fg "#{@powerline-color-activity-1}"
set -goq  @theme-window-status-separator ""
set -goqF @theme-window-status-current-bg "#{@powerline-color-main-1}"
set -goqF @theme-window-status-current-fg "#{@powerline-color-black-1}"
set -goqF @theme-window-status-format " #{@themepack-window-status-format} "
set -goqF @theme-window-status-current-format " #{@themepack-window-status-current-format} "

# Customizable prefixes and suffixes for @theme-* format options
set -goq @theme-status-left-prefix ""
set -goq @theme-status-left-suffix ""
set -goq @theme-status-right-prefix ""
set -goq @theme-status-right-suffix ""
set -goq @theme-window-status-current-prefix ""
set -goq @theme-window-status-current-suffix ""
set -goq @theme-window-status-prefix ""
set -goq @theme-window-status-suffix ""

# Apply prefixes and suffixes to @theme-* format options
set -gqF @theme-status-left "#{@theme-status-left-prefix}#{@theme-status-left}#{@theme-status-left-suffix}"
set -gqF @theme-status-right "#{@theme-status-right-prefix}#{@theme-status-right}#{@theme-status-right-suffix}"
set -gqF @theme-window-status-current-format "#{@theme-window-status-current-prefix}#{@theme-window-status-current-format}#{@theme-window-status-current-suffix}"
set -gqF @theme-window-status-format "#{@theme-window-status-prefix}#{@theme-window-status-format}#{@theme-window-status-suffix}"

# Apply @theme-* options to Tmux
set -gF  display-panes-active-colour "#{@theme-display-panes-active-colour}"
set -gF  display-panes-colour "#{@theme-display-panes-colour}"
set -gF  message-command-style "fg=#{@theme-message-command-fg},bg=#{@theme-message-command-bg}"
set -gF  message-style "fg=#{@theme-message-fg},bg=#{@theme-message-bg}"
set -gF  status-interval "#{@theme-status-interval}"
set -gF  status-justify "#{@theme-status-justify}"
set -gF  status-left "#{@theme-status-left}"
set -gF  status-left-length "#{@theme-status-left-length}"
set -gF  status-left-style "fg=#{@theme-status-left-fg},bg=#{@theme-status-left-bg}"
set -gF  status-right "#{@theme-status-right}"
set -gF  status-right-length "#{@theme-status-right-length}"
set -gF  status-right-style "fg=#{@theme-status-right-fg},bg=#{@theme-status-right-bg}"
set -gF  status-style "fg=#{@theme-status-fg},bg=#{@theme-status-bg}"
set -gwF clock-mode-colour "#{@theme-clock-mode-colour}"
set -gwF clock-mode-style "#{@theme-clock-mode-style}"
set -gwF mode-style "fg=#{@theme-mode-fg},bg=#{@theme-mode-bg}"
set -gwF pane-active-border-style "fg=#{@theme-pane-active-border-fg},bg=#{@theme-pane-active-border-bg}"
set -gwF pane-border-style "fg=#{@theme-pane-border-fg},bg=#{@theme-pane-border-bg}"
set -gwF window-status-activity-style "fg=#{@theme-window-status-activity-fg},bg=#{@theme-window-status-activity-bg}"
set -gwF window-status-current-format "#{@theme-window-status-current-format}"
set -gwF window-status-current-style "fg=#{@theme-window-status-current-fg},bg=#{@theme-window-status-current-bg}"
set -gwF window-status-format "#{@theme-window-status-format}"
set -gwF window-status-separator "#{@theme-window-status-separator}"


###############################################
set-option -g status-position top

# Жирные названия табов (окон) с сохранением цветов темы
set -gwF window-status-current-style "fg=colour16,bg=#{@theme-window-status-current-bg},bold"
set -gwF window-status-style "fg=#{@theme-status-fg},bg=#{@theme-status-bg},bold"


# ============================================
# Кастомизация статусной строки - CPU и RAM
# ============================================

# Обновлять статус каждые 2 секунды
set -g status-interval 2

# Добавить CPU и RAM в правую часть статусной строки
set -g status-right-length 150
set -g status-right "#[fg=colour245,bg=colour233,bold] 󰍛 #(top -bn1 | grep 'Cpu(s)' | awk '{print 100-$8\"%\"}' | sed 's/\\.[0-9]*%/%/')  󰘚 #(free | grep Mem | awk '{printf \"%.0f%%\", $3/$2 * 100.0}')   %d/%m %H:%M "

# Имя сессии слева
set -g status-left-length 30
set -g status-left "#[fg=colour39,bold] #(tmux display-message -p '#S' | tr '[:lower:]' '[:upper:]') "

# Enable focus events for vim integration
set -g focus-events on

# Одинаковый цвет границы для активной и неактивной панели
set -g pane-border-style fg=colour238
set -g pane-active-border-style fg=colour238

# Имена табов заглавными буквами (без флага * для активного)
set -gw window-status-format " #I:#(tmux display -p -t '#{window_id}' '#W' | tr '[:lower:]' '[:upper:]') "
set -gw window-status-current-format " #I:#(tmux display -p -t '#{window_id}' '#W' | tr '[:lower:]' '[:upper:]') "

# =============================================================================
# CCB_DISABLED: # CCB (Claude Code Bridge) tmux configuration
# CCB_DISABLED: # Compatible with Oh My Tmux (gpakosz/.tmux)
# CCB_DISABLED: # Auto-installed by ccb install.sh
# CCB_DISABLED: # =============================================================================
# CCB_DISABLED: 
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: # General Settings
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: 
# CCB_DISABLED: # Enable mouse support (click to switch pane, scroll, drag to resize)
# CCB_DISABLED: set -g mouse on
# CCB_DISABLED: 
# CCB_DISABLED: # Use vi mode for copy mode
# CCB_DISABLED: set-window-option -g mode-keys vi
# CCB_DISABLED: 
# CCB_DISABLED: # Larger history buffer
# CCB_DISABLED: set -g history-limit 50000
# CCB_DISABLED: 
# CCB_DISABLED: # Faster escape time (better for vim/neovim)
# CCB_DISABLED: set -sg escape-time 10
# CCB_DISABLED: 
# CCB_DISABLED: # Focus events for vim/neovim autoread
# CCB_DISABLED: set -g focus-events on
# CCB_DISABLED: 
# CCB_DISABLED: # Enable system clipboard integration (OSC 52)
# CCB_DISABLED: set -s set-clipboard on
# CCB_DISABLED: 
# CCB_DISABLED: # Ensure clipboard-related env vars stay updated when attaching from GUI/remote sessions.
# CCB_DISABLED: # (Important on Wayland/WSL, and when tmux server was started without DISPLAY.)
# CCB_DISABLED: set -g update-environment "DISPLAY WAYLAND_DISPLAY XDG_RUNTIME_DIR WSL_DISTRO_NAME WSL_INTEROP SSH_AUTH_SOCK SSH_CONNECTION"
# CCB_DISABLED: 
# CCB_DISABLED: # Better colors
# CCB_DISABLED: set -g default-terminal "tmux-256color"
# CCB_DISABLED: set -sa terminal-features ',xterm-256color:RGB'
# CCB_DISABLED: set -sa terminal-overrides ',xterm-256color:Tc'
# CCB_DISABLED: 
# CCB_DISABLED: # Start windows and panes at 1, not 0
# CCB_DISABLED: set -g base-index 1
# CCB_DISABLED: setw -g pane-base-index 1
# CCB_DISABLED: 
# CCB_DISABLED: # Renumber windows when one is closed
# CCB_DISABLED: set -g renumber-windows on
# CCB_DISABLED: 
# CCB_DISABLED: # NOTE:
# CCB_DISABLED: # CCB's status bar + pane title theming is enabled only while CCB is running.
# CCB_DISABLED: # See: `/home/ubuntu/.local/bin/ccb-tmux-on.sh` / `/home/ubuntu/.local/bin/ccb-tmux-off.sh`.
# CCB_DISABLED: 
# CCB_DISABLED: # CCB script directory (filled by installer)
# CCB_DISABLED: set -g @ccb_bin_dir "/home/ubuntu/.local/bin"
# CCB_DISABLED: 
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: # Copy Mode (vi-style) with System Clipboard
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: 
# CCB_DISABLED: # Better scroll speed (2 lines per scroll instead of default 5)
# CCB_DISABLED: bind -T copy-mode-vi WheelUpPane select-pane \; send-keys -X -N 2 scroll-up
# CCB_DISABLED: bind -T copy-mode-vi WheelDownPane select-pane \; send-keys -X -N 2 scroll-down
# CCB_DISABLED: 
# CCB_DISABLED: # Vi-style copy mode bindings
# CCB_DISABLED: bind-key -T copy-mode-vi 'v' send -X begin-selection
# CCB_DISABLED: bind-key -T copy-mode-vi 'C-v' send -X rectangle-toggle
# CCB_DISABLED: 
# CCB_DISABLED: # Copy to system clipboard (auto-detect by tool presence).
# CCB_DISABLED: # 'y' to copy and stay in copy mode, 'Enter' to copy and exit.
# CCB_DISABLED: if-shell 'command -v xclip' {
# CCB_DISABLED:     bind-key -T copy-mode-vi 'y' send -X copy-pipe 'xclip -selection clipboard'
# CCB_DISABLED:     bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel 'xclip -selection clipboard'
# CCB_DISABLED:     bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel 'xclip -selection clipboard'
# CCB_DISABLED: }
# CCB_DISABLED: if-shell 'command -v xsel' {
# CCB_DISABLED:     bind-key -T copy-mode-vi 'y' send -X copy-pipe 'xsel --clipboard --input'
# CCB_DISABLED:     bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel 'xsel --clipboard --input'
# CCB_DISABLED:     bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel 'xsel --clipboard --input'
# CCB_DISABLED: }
# CCB_DISABLED: if-shell 'command -v wl-copy' {
# CCB_DISABLED:     bind-key -T copy-mode-vi 'y' send -X copy-pipe 'wl-copy'
# CCB_DISABLED:     bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel 'wl-copy'
# CCB_DISABLED:     bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel 'wl-copy'
# CCB_DISABLED: }
# CCB_DISABLED: if-shell 'command -v pbcopy' {
# CCB_DISABLED:     bind-key -T copy-mode-vi 'y' send -X copy-pipe 'pbcopy'
# CCB_DISABLED:     bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel 'pbcopy'
# CCB_DISABLED:     bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel 'pbcopy'
# CCB_DISABLED: }
# CCB_DISABLED: if-shell 'command -v clip.exe' {
# CCB_DISABLED:     bind-key -T copy-mode-vi 'y' send -X copy-pipe 'clip.exe'
# CCB_DISABLED:     bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel 'clip.exe'
# CCB_DISABLED:     bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel 'clip.exe'
# CCB_DISABLED: }
# CCB_DISABLED: 
# CCB_DISABLED: # Paste from system clipboard (try providers in order; avoids X11/Wayland mis-detection).
# CCB_DISABLED: # Prefer tmux's default paste key (`prefix + ]`) for compatibility with common tmux configs.
# CCB_DISABLED: # Also bind `prefix + p` because many users expect it (and some configs remap `]`).
# CCB_DISABLED: bind-key ] run-shell "sh -lc '\
# CCB_DISABLED: out=\"\"; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v wl-paste >/dev/null 2>&1; then out=$(wl-paste -n 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v wl-paste >/dev/null 2>&1; then out=$(wl-paste -n -p 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v xclip >/dev/null 2>&1; then out=$(xclip -selection clipboard -o 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v xclip >/dev/null 2>&1; then out=$(xclip -selection primary -o 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v xsel >/dev/null 2>&1; then out=$(xsel --clipboard --output 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v xsel >/dev/null 2>&1; then out=$(xsel --primary --output 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v pbpaste >/dev/null 2>&1; then out=$(pbpaste 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v powershell.exe >/dev/null 2>&1; then out=$(powershell.exe -NoProfile -Command Get-Clipboard 2>/dev/null | tr -d \"\\r\" || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ]; then tmux display-message \"No clipboard content/helper found (install wl-clipboard or xclip/xsel)\"; exit 0; fi; \
# CCB_DISABLED: printf \"%s\" \"\$out\"' | tmux load-buffer - && tmux paste-buffer"
# CCB_DISABLED: bind-key p run-shell "sh -lc '\
# CCB_DISABLED: out=\"\"; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v wl-paste >/dev/null 2>&1; then out=$(wl-paste -n 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v wl-paste >/dev/null 2>&1; then out=$(wl-paste -n -p 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v xclip >/dev/null 2>&1; then out=$(xclip -selection clipboard -o 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v xclip >/dev/null 2>&1; then out=$(xclip -selection primary -o 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v xsel >/dev/null 2>&1; then out=$(xsel --clipboard --output 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v xsel >/dev/null 2>&1; then out=$(xsel --primary --output 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v pbpaste >/dev/null 2>&1; then out=$(pbpaste 2>/dev/null || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ] && command -v powershell.exe >/dev/null 2>&1; then out=$(powershell.exe -NoProfile -Command Get-Clipboard 2>/dev/null | tr -d \"\\r\" || true); fi; \
# CCB_DISABLED: if [ -z \"\$out\" ]; then tmux display-message \"No clipboard content/helper found (install wl-clipboard or xclip/xsel)\"; exit 0; fi; \
# CCB_DISABLED: printf \"%s\" \"\$out\"' | tmux load-buffer - && tmux paste-buffer"
# CCB_DISABLED: 
# CCB_DISABLED: # Alternative: paste the PRIMARY selection when available (useful on Linux where middle-click works).
# CCB_DISABLED: bind-key P run-shell "sh -lc 'if command -v wl-paste >/dev/null 2>&1 && wl-paste -n -p 2>/dev/null; then exit 0; fi; if command -v xclip >/dev/null 2>&1 && xclip -selection primary -o 2>/dev/null; then exit 0; fi; if command -v xsel >/dev/null 2>&1 && xsel --primary --output 2>/dev/null; then exit 0; fi; tmux display-message \"No PRIMARY selection helper found\"; exit 0' | tmux load-buffer - && tmux paste-buffer"
# CCB_DISABLED: 
# CCB_DISABLED: # (CCB theme is applied dynamically by ccb while running.)
# CCB_DISABLED: 
# CCB_DISABLED: # NOTE:
# CCB_DISABLED: # We intentionally do NOT bind model-specific tmux keys (e.g. prefix+o/c/g),
# CCB_DISABLED: # because they conflict with common tmux defaults and user workflows.
# CCB_DISABLED: # If you want CCB navigation keys, add your own bindings in `~/.tmux.conf.local`.
# CCB_DISABLED: 
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: # Pane Management
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: 
# CCB_DISABLED: # Split panes using | and -
# CCB_DISABLED: bind | split-window -h -c "#{pane_current_path}"
# CCB_DISABLED: bind - split-window -v -c "#{pane_current_path}"
# CCB_DISABLED: unbind '"'
# CCB_DISABLED: unbind %
# CCB_DISABLED: 
# CCB_DISABLED: # Navigate panes with vim keys
# CCB_DISABLED: bind h select-pane -L
# CCB_DISABLED: bind j select-pane -D
# CCB_DISABLED: bind k select-pane -U
# CCB_DISABLED: bind l select-pane -R
# CCB_DISABLED: 
# CCB_DISABLED: # Resize panes with Shift + vim keys
# CCB_DISABLED: bind -r H resize-pane -L 5
# CCB_DISABLED: bind -r J resize-pane -D 5
# CCB_DISABLED: bind -r K resize-pane -U 5
# CCB_DISABLED: bind -r L resize-pane -R 5
# CCB_DISABLED: 
# CCB_DISABLED: # Zoom pane toggle
# CCB_DISABLED: bind z resize-pane -Z
# CCB_DISABLED: 
# CCB_DISABLED: # Synchronize panes toggle (type in all panes)
# CCB_DISABLED: bind S setw synchronize-panes
# CCB_DISABLED: 
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: # Mouse Mode Toggle
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: 
# CCB_DISABLED: bind m set -g mouse on \; display "Mouse ON"
# CCB_DISABLED: bind M set -g mouse off \; display "Mouse OFF"
# CCB_DISABLED: 
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: # Reload Config
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: 
# CCB_DISABLED: bind r source-file ~/.tmux.conf \; display "Config reloaded!"
# CCB_DISABLED: 
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: # Session Management
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: 
# CCB_DISABLED: # Easy session switching
# CCB_DISABLED: bind s choose-tree -Zs
# CCB_DISABLED: 
# CCB_DISABLED: # Kill session
# CCB_DISABLED: bind X confirm-before -p "Kill session #S? (y/n)" kill-session
# CCB_DISABLED: 
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: # Activity Monitoring
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: 
# CCB_DISABLED: setw -g monitor-activity on
# CCB_DISABLED: set -g visual-activity off
# CCB_DISABLED: 
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: # Visual Styling / Theme
# CCB_DISABLED: # -----------------------------------------------------------------------------
# CCB_DISABLED: # NOTE:
# CCB_DISABLED: # CCB intentionally does not set any persistent statusbar/theme options here.
# CCB_DISABLED: # The CCB theme is applied per-session only while CCB is active via:
# CCB_DISABLED: #   - `~/.local/bin/ccb-tmux-on.sh`
# CCB_DISABLED: # and restored on exit via:
# CCB_DISABLED: #   - `~/.local/bin/ccb-tmux-off.sh`
# CCB_DISABLED: #
# CCB_DISABLED: # This avoids clobbering your existing tmux theme when CCB is not running.
# CCB_DISABLED: 
# CCB_DISABLED: # =============================================================================
# CCB_DISABLED: # End of CCB tmux configuration
# CCB_DISABLED: # =============================================================================

# CCB bin directory (needed for bridge)
set -g @ccb_bin_dir "/home/ubuntu/.local/bin"
